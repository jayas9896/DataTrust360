# Detailed Change Log: CL-0019

Back to main log: [docs/commit-log.md](../commit-log.md)

## Commit Summary
Add OpenAI insights and audit logging.

## Why
Provide natural language summaries for anomaly events and capture them for compliance.

## What Changed
- Added OpenAI client integration in the processing worker.
- Added audit log endpoint and repository in the storage service.
- Added shared audit DTO and storage client support for audit persistence.
- Updated configuration and deployment env vars for OpenAI.

## How (Implementation Details)
- Added `OpenAiInsightService` with a RestClient and response parsing.
- Added `AuditLogRequest` in common and mapped it to `AuditLog` in storage.
- Added `/api/v1/storage/audit` endpoint and `AuditLogRepository`.
- Wired OpenAI configuration in application.yml and Kubernetes manifest.

## Files Touched
- `common/src/main/java/com/datatrust360/common/AuditLogRequest.java`
- `storage-service/src/main/java/com/datatrust360/storage/AuditLog.java`
- `storage-service/src/main/java/com/datatrust360/storage/AuditLogRepository.java`
- `storage-service/src/main/java/com/datatrust360/storage/StorageController.java`
- `processing-worker/src/main/java/com/datatrust360/processing/StorageClient.java`
- `processing-worker/src/main/java/com/datatrust360/processing/OpenAiInsightService.java`
- `processing-worker/src/main/java/com/datatrust360/processing/ProcessingConfig.java`
- `processing-worker/src/main/java/com/datatrust360/processing/AnomalyScoringWorker.java`
- `processing-worker/src/main/resources/application.yml`
- `k8s/processing-worker.yaml`
- `README.md`
- `docs/commit-log.md`
- `docs/change-log-detailed/CL-0019.md`

