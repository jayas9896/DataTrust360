# Detailed Change Log: CL-0017

Back to main log: [docs/commit-log.md](../commit-log.md)

## Commit Summary
Persist ingested events to storage service.

## Why
Preserve raw events for forensics and downstream analytics while keeping ingestion and processing decoupled.

## What Changed
- Added a storage service endpoint to persist event payloads.
- Added a processing-worker storage client and JSON parsing to persist events from Kafka.
- Wired processing-worker config for storage base URL and Kubernetes env var.
- Updated README storage API list.

## How (Implementation Details)
- Added `StorageClient` and `ProcessingConfig` with RestClient base URL configuration.
- Updated the Kafka listener to parse `EventEnvelope`, persist to storage, then enqueue scoring jobs.
- Added `/api/v1/storage/events` endpoint that maps envelopes to `EventDocument`.
- Added `STORAGE_SERVICE_URL` in k8s manifest and config property in application.yml.

## Files Touched
- `processing-worker/pom.xml`
- `processing-worker/src/main/java/com/datatrust360/processing/ProcessingConfig.java`
- `processing-worker/src/main/java/com/datatrust360/processing/StorageClient.java`
- `processing-worker/src/main/java/com/datatrust360/processing/StreamIngestListener.java`
- `processing-worker/src/main/resources/application.yml`
- `storage-service/src/main/java/com/datatrust360/storage/StorageController.java`
- `k8s/processing-worker.yaml`
- `README.md`
- `docs/commit-log.md`
- `docs/change-log-detailed/CL-0017.md`

